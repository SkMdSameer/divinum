function General(){var e=this;this.init=function(){e.generalOption(),e.uploadSettings(),e.scriptLicense(),e.users(),e.services(),$("#order_resume").length>0&&(e.order(),e.calculateOrderCharge()),$(".sidebar").length>0&&(_url=window.location.href,_url=_url.split("?t="),2==_url.length&&$('[data-content="'+_url[1]+'"]').trigger("click"))},this.users=function(){$(document).on("click",".ajaxViewUser",(function(){event.preventDefault(),pageOverlay.show(),_that=$(this),_action=_that.attr("href"),_data=$.param({token:token}),$.post(_action,_data,(function(e){setTimeout((function(){pageOverlay.hide(),notify(e.message,e.status),"success"==e.status&&(_redirect=PATH+"statistics",reloadPage(_redirect))}),2e3)}),"json")})),$(document).on("click",".ajaxBackToAdmin",(function(){event.preventDefault(),pageOverlay.show(),_that=$(this),_action=_that.attr("href"),_data=$.param({token:token}),$.post(_action,_data,(function(e){setTimeout((function(){pageOverlay.hide(),notify(e.message,e.status),"success"==e.status&&(_redirect=PATH+"users",reloadPage(_redirect))}),2e3)}),"json")}))},this.services=function(){$(document).on("click",".check-all",(function(){_that=$(this),_checkName=_that.data("name"),$("."+_checkName).prop("checked",this.checked)})),$(document).on("change",".ajaxChangeServiceType",(function(){switch(event.preventDefault(),_that=$(this),_type=_that.val(),_type){case"default":$("#add_edit_service .dripfeed-form").removeClass("d-none");break;default:$("#add_edit_service .dripfeed-form").addClass("d-none")}})),$(document).on("click",".ajaxActionOptions",(function(){event.preventDefault(),_that=$(this),_type=_that.data("type"),("delete"!=_type&&"all_deactive"!=_type&&"clear_all"!=_type||confirm_notice("deleteItems"))&&(_action=_that.attr("href"),_form=_that.closest("form"),_ids=_form.serialize(),_data=_ids+"&"+$.param({token:token,type:_type}),pageOverlay.show(),$.post(_action,_data,(function(e){setTimeout((function(){pageOverlay.hide(),notify(e.message,e.status),"success"==e.status&&(_redirect="",reloadPage(_redirect))}),2e3)}),"json"))}))},this.scriptLicense=function(){$(document).on("click",".ajaxUpgradeVersion",(function(){pageOverlay.show(),event.preventDefault(),_that=$(this),_action=_that.attr("href"),_data=$.param({token:token}),$.post(_action,_data,(function(e){setTimeout((function(){pageOverlay.hide(),notify(e.message,e.status),"success"==e.status&&(_redirect="",reloadPage(_redirect))}),2e3)}),"json")}))},this.order=function(){_total_quantity=0,_service_price=0,$(document).on("input",".ajaxQuantity",(function(){_that=$(this),_quantity=_that.val(),_service_id=$("#service_id").val(),_service_max=$("#order_resume input[name=service_max]").val(),_service_min=$("#order_resume input[name=service_min]").val(),_service_price=$("#order_resume input[name=service_price]").val(),_is_drip_feed=$("#new_order input[name=is_drip_feed]:checked").val(),_is_drip_feed?(_runs=$("#new_order input[name=runs]").val(),_interval=$("#new_order input[name=interval]").val(),_total_quantity=_runs*_quantity,""!=_total_quantity&&$("#new_order input[name=total_quantity]").val(_total_quantity)):_total_quantity=_quantity,_total_charge=""!=_total_quantity&&""!=_service_price?_total_quantity*_service_price/1e3:0,_currency_symbol=$("#new_order input[name=currency_symbol]").val(),$("#new_order input[name=total_charge]").val(_total_charge),$("#new_order .total_charge span").html(_currency_symbol+_total_charge)})),$(document).on("input",".ajaxDripFeedRuns",(function(){_that=$(this),_runs=_that.val(),_service_id=$("#service_id").val(),_quantity=$("#new_order input[name=quantity]").val(),_service_max=$("#order_resume input[name=service_max]").val(),_service_min=$("#order_resume input[name=service_min]").val(),_service_price=$("#order_resume input[name=service_price]").val(),_is_drip_feed=$("#new_order input[name=is_drip_feed]:checked").val(),_is_drip_feed?(_interval=$("#new_order input[name=interval]").val(),_total_quantity=_runs*_quantity,""!=_total_quantity&&$("#new_order input[name=total_quantity]").val(_total_quantity)):_total_quantity=_quantity,_total_charge=""!=_total_quantity&&""!=_service_price?_total_quantity*_service_price/1e3:0,_currency_symbol=$("#new_order input[name=currency_symbol]").val(),$("#new_order input[name=total_charge]").val(_total_charge),$("#new_order .total_charge span").html(_currency_symbol+_total_charge)})),$(document).on("click",".is_drip_feed",(function(){_that=$(this),_service_id=$("#service_id").val(),_quantity=$("#new_order input[name=quantity]").val(),_service_max=$("#order_resume input[name=service_max]").val(),_service_min=$("#order_resume input[name=service_min]").val(),_service_price=$("#order_resume input[name=service_price]").val(),_that.is(":checked")?(_runs=$("#new_order input[name=runs]").val(),_interval=$("#new_order input[name=interval]").val(),_total_quantity=_runs*_quantity,""!=_total_quantity&&$("#new_order input[name=total_quantity]").val(_total_quantity)):_total_quantity=_quantity,_total_charge=""!=_total_quantity&&""!=_service_price?_total_quantity*_service_price/1e3:0,_currency_symbol=$("#new_order input[name=currency_symbol]").val(),$("#new_order input[name=total_charge]").val(_total_charge),$("#new_order .total_charge span").html(_currency_symbol+_total_charge)}))},this.calculateOrderCharge=function(){$(document).on("keyup",".ajax_custom_comments",(function(){_quantity=$("#new_order .order-comments input[name=comments]").val(),""==_quantity?_quantity=0:_quantity=_quantity.split(",").length,_service_id=$("#service_id").val(),$("#new_order .order-default-quantity input[name=quantity]").val(_quantity),_service_max=$("#order_resume input[name=service_max]").val(),_service_min=$("#order_resume input[name=service_min]").val(),_service_price=$("#order_resume input[name=service_price]").val(),_total_charge=""!=_quantity&&""!=_service_price?_quantity*_service_price/1e3:0,_currency_symbol=$("#new_order input[name=currency_symbol]").val(),$("#new_order input[name=total_charge]").val(_total_charge),$("#new_order .total_charge span").html(_currency_symbol+_total_charge)})),$(document).on("keyup",".ajax_custom_lists",(function(){_quantity=$("#new_order .order-usernames-custom input[name=usernames_custom]").val(),console.log(_quantity),""==_quantity?_quantity=0:_quantity=_quantity.split(",").length,_service_id=$("#service_id").val(),$("#new_order .order-default-quantity input[name=quantity]").val(_quantity),_service_max=$("#order_resume input[name=service_max]").val(),_service_min=$("#order_resume input[name=service_min]").val(),_service_price=$("#order_resume input[name=service_price]").val(),_total_charge=""!=_quantity&&""!=_service_price?_quantity*_service_price/1e3:0,_currency_symbol=$("#new_order input[name=currency_symbol]").val(),$("#new_order input[name=total_charge]").val(_total_charge),$("#new_order .total_charge span").html(_currency_symbol+_total_charge)}))},this.generalOption=function(){$(document).on("click",".ajaxModal",(function(){return _that=$(this),_url=_that.attr("href"),$("#modal-ajax").load(_url,(function(){$("#modal-ajax").modal({backdrop:"static",keyboard:!1}),$("#modal-ajax").modal("show")})),!1})),$(document).on("change",".ajaxChangeTicketSubject",(function(){switch(event.preventDefault(),_that=$(this),_type=_that.val(),_type){case"subject_order":$("#add_new_ticket .subject-order").removeClass("d-none"),$("#add_new_ticket .subject-payment").addClass("d-none");break;case"subject_payment":$("#add_new_ticket .subject-order").addClass("d-none"),$("#add_new_ticket .subject-payment").removeClass("d-none");break;default:$("#add_new_ticket .subject-order").addClass("d-none"),$("#add_new_ticket .subject-payment").addClass("d-none")}})),$(document).on("change",".ajaxChangeLanguage",(function(){event.preventDefault(),_that=$(this),_ids=_that.val(),_action=_that.data("url")+_ids,_redirect=_that.data("redirect"),_data=$.param({token:token,redirect:_redirect}),$.post(_action,_data,(function(e){pageOverlay.show(),setTimeout((function(){pageOverlay.hide(),location.reload()}),1e3)}),"json")})),$(document).on("click",".ajaxChangeStatus",(function(){event.preventDefault(),_that=$(this),_action=_that.data("url"),_status=_that.data("status"),_data=$.param({token:token,status:_status}),$.post(_action,_data,(function(e){pageOverlay.show(),setTimeout((function(){pageOverlay.hide(),notify(e.message,e.status)}),2e3),"new"==_status||"unread"==_status?_redirect=PATH+"tickets":_redirect="",reloadPage(_redirect)}),"json")})),$(document).on("change",".ajaxChange",(function(){if(pageOverlay.show(),event.preventDefault(),_that=$(this),_id=_that.val(),""==_id)return pageOverlay.hide(),!1;_action=_that.data("url")+_id,_data=$.param({token:token}),$.post(_action,_data,(function(e){pageOverlay.hide(),setTimeout((function(){$("#result_ajaxSearch").html(e)}),100)}))})),$(document).on("change",".ajaxChangeCategory",(function(){event.preventDefault(),$("#new_order .drip-feed-option").addClass("d-none"),$("#order_resume").length>0&&($("#order_resume input[name=service_name]").val(""),$("#order_resume input[name=service_min]").val(""),$("#order_resume input[name=service_max]").val(""),$("#order_resume input[name=service_price]").val(""),$("#order_resume textarea[name=service_desc]").val(""),$("#order_resume #service_desc").val("")),_that=$(this),_id=_that.val(),""!=_id&&(_action=_that.data("url")+_id,_data=$.param({token:token}),$.post(_action,_data,(function(e){setTimeout((function(){$("#result_onChange").html(e)}),100)})))})),$(document).on("change",".ajaxChangeService",(function(){switch(event.preventDefault(),_that=$(this),_id=_that.val(),_dripfeed=_that.children("option:selected").data("dripfeed"),_service_type=_that.children("option:selected").data("type"),$("#new_order .order-default-quantity input[name=quantity]").attr("disabled",!1),$("#new_order .order-usernames-custom").addClass("d-none"),$("#new_order .order-comments-custom-package").addClass("d-none"),$("#new_order .order-default-quantity input[name=quantity]").val(""),_total_charge=0,_currency_symbol=$("#new_order input[name=currency_symbol]").val(),$("#new_order input[name=total_charge]").val(_total_charge),$("#new_order .total_charge span").html(_currency_symbol+_total_charge),_service_type){case"subscriptions":$("#new_order input[name=sub_expiry]").val(""),$("#new_order .order-default-link").addClass("d-none"),$("#new_order .order-default-quantity").addClass("d-none"),$("#new_order #result_total_charge").addClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-username").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-subscriptions").removeClass("d-none");break;case"custom_comments":$("#new_order .order-default-link").removeClass("d-none"),$("#new_order .order-comments").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-username").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-default-quantity").removeClass("d-none"),$("#new_order .order-default-quantity input[name=quantity]").attr("disabled",!0),$("#new_order .order-subscriptions").addClass("d-none");break;case"custom_comments_package":$("#new_order .order-default-link").removeClass("d-none"),$("#new_order .order-comments-custom-package").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-default-quantity").addClass("d-none"),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-username").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-subscriptions").addClass("d-none");break;case"mentions_with_hashtags":$("#new_order .order-default-link").removeClass("d-none"),$("#new_order .order-default-quantity").removeClass("d-none"),$("#new_order .order-usernames").removeClass("d-none"),$("#new_order .order-hashtags").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-username").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-subscriptions").addClass("d-none");break;case"mentions_custom_list":$("#new_order .order-default-link").removeClass("d-none"),$("#new_order .order-usernames-custom").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-default-quantity").removeClass("d-none"),$("#new_order .order-default-quantity input[name=quantity]").attr("disabled",!0),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-username").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-subscriptions").addClass("d-none");break;case"mentions_hashtag":$("#new_order .order-default-link").removeClass("d-none"),$("#new_order .order-default-quantity").removeClass("d-none"),$("#new_order .order-hashtag").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-username").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-subscriptions").addClass("d-none");break;case"mentions_user_followers":$("#new_order .order-default-link").removeClass("d-none"),$("#new_order .order-default-quantity").removeClass("d-none"),$("#new_order .order-username").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-subscriptions").addClass("d-none");break;case"mentions_media_likers":$("#new_order .order-default-link").removeClass("d-none"),$("#new_order .order-default-quantity").removeClass("d-none"),$("#new_order .order-media").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-username").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-subscriptions").addClass("d-none");break;case"package":$("#new_order .order-default-link").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-default-quantity").addClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-username").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-subscriptions").addClass("d-none");break;case"comment_likes":$("#new_order .order-default-link").removeClass("d-none"),$("#new_order .order-default-quantity").removeClass("d-none"),$("#new_order .order-username").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-subscriptions").addClass("d-none");break;default:$("#new_order .order-default-link").removeClass("d-none"),$("#new_order .order-default-quantity").removeClass("d-none"),$("#new_order #result_total_charge").removeClass("d-none"),$("#new_order .order-comments").addClass("d-none"),$("#new_order .order-usernames").addClass("d-none"),$("#new_order .order-hashtags").addClass("d-none"),$("#new_order .order-username").addClass("d-none"),$("#new_order .order-hashtag").addClass("d-none"),$("#new_order .order-media").addClass("d-none"),$("#new_order .order-subscriptions").addClass("d-none")}_dripfeed?$("#new_order .drip-feed-option").removeClass("d-none"):$("#new_order .drip-feed-option").addClass("d-none"),_action=_that.data("url")+_id,_data=$.param({token:token}),$.post(_action,_data,(function(e){setTimeout((function(){$("#result_onChangeService").html(e),"package"!=_service_type&&"custom_comments_package"!=_service_type||(_service_price=$("#order_resume input[name=service_price]").val(),_total_charge=_service_price,_currency_symbol=$("#new_order input[name=currency_symbol]").val(),$("#new_order input[name=total_charge]").val(_total_charge),$("#new_order .total_charge span").html(_currency_symbol+_total_charge))}),100)}))})),$(document).on("submit",".ajaxSearchItem",(function(){pageOverlay.show(),event.preventDefault(),_that=$(this),_action=_that.attr("action"),_data=_that.serialize(),_data=_data+"&"+$.param({token:token}),$.post(_action,_data,(function(e){setTimeout((function(){pageOverlay.hide(),$("#result_ajaxSearch").html(e)}),300)}))})),$(document).on("click",".ajaxAddService",(function(){event.preventDefault(),_that=$(this),_serviceid=_that.data("serviceid"),_name=_that.data("name"),_min=_that.data("min"),_max=_that.data("max"),_price=_that.data("price"),_dripfeed=_that.data("dripfeed"),_api_provider_id=_that.data("api_provider_id"),_type=_that.data("type"),_service_desc=_that.data("service_desc"),$("#modal-add-service input[name=dripfeed]").val(_dripfeed),$("#modal-add-service input[name=service_id]").val(_serviceid),$("#modal-add-service input[name=name]").val(_name),$("#modal-add-service input[name=min]").val(_min),$("#modal-add-service input[name=max]").val(_max),$("#modal-add-service input[name=price]").val(_price),$("#modal-add-service input[name=api_provider_id]").val(_api_provider_id),$("#modal-add-service input[name=type]").val(_type),$("#modal-add-service textarea[name=service_desc]").val(_service_desc),$("#modal-add-service").modal("show")})),$(document).on("click",".ajaxUpdateApiProvider",(function(){$("#result_notification").html(""),pageOverlay.show(),event.preventDefault(),_that=$(this),_action=_that.attr("href"),_redirect=_that.data("redirect"),_data=$.param({token:token}),$.post(_action,_data,(function(e){setTimeout((function(){pageOverlay.hide(),notify(e.message,e.status),"success"==e.status&&"undefined"!=typeof _redirect&&reloadPage(_redirect)}),2e3)}),"json")})),$(document).on("submit",".actionSyncApiServices",(function(){if($("#result_notification").html(""),pageOverlay.show(),event.preventDefault(),_that=$(this),_action=_that.attr("action"),_redirect=_that.data("redirect"),$("#mass_order").hasClass("active")){if(_data=$("#mass_order").find("input[name!=mass_order]").serialize(),_mass_order_array=[],_mass_orders=$("#mass_order").find("textarea[name=mass_order]").val(),_mass_orders.length>0){_mass_orders=_mass_orders.split(/\n/);for(var e=0;e<_mass_orders.length;e++)/\S/.test(_mass_orders[e])&&_mass_order_array.push($.trim(_mass_orders[e]))}_data=_data+"&"+$.param({mass_order:_mass_order_array,token:token})}else _data=_that.serialize(),_data=_data+"&"+$.param({token:token});return $.post(_action,_data,(function(e){is_json(e)?("success"==(e=JSON.parse(e)).status&&"undefined"!=typeof _redirect&&reloadPage(_redirect),setTimeout((function(){pageOverlay.hide()}),2e3),setTimeout((function(){notify(e.message,e.status)}),3e3)):setTimeout((function(){pageOverlay.hide(),$("#modal-ajax").modal("hide"),$("#result_notification").html(e)}),2e3)})),!1})),$(document).on("submit",".actionForm",(function(){if(pageOverlay.show(),event.preventDefault(),_that=$(this),_action=_that.attr("action"),_redirect=_that.data("redirect"),$("#mass_order").hasClass("active")){if(_data=$("#mass_order").find("input[name!=mass_order]").serialize(),_mass_order_array=[],_mass_orders=$("#mass_order").find("textarea[name=mass_order]").val(),_mass_orders.length>0){_mass_orders=_mass_orders.split(/\n/);for(var e=0;e<_mass_orders.length;e++)/\S/.test(_mass_orders[e])&&_mass_order_array.push($.trim(_mass_orders[e]))}_data=_data+"&"+$.param({mass_order:_mass_order_array,token:token})}else _data=_that.serialize(),_data=_data+"&"+$.param({token:token});return $.post(_action,_data,(function(e){setTimeout((function(){pageOverlay.hide()}),1500),is_json(e)?(e=JSON.parse(e),setTimeout((function(){notify(e.message,e.status)}),1500),setTimeout((function(){"success"==e.status&&"undefined"!=typeof _redirect&&reloadPage(_redirect)}),2e3)):setTimeout((function(){$("#result_notification").html(e)}),1500)})),!1})),$(document).on("click",".ajaxDeleteItem",(function(){event.preventDefault(),confirm_notice("deleteItem")&&(_that=$(this),_action=_that.attr("href"),_data=$.param({token:token}),$.post(_action,_data,(function(e){pageOverlay.show(),"success"==e.status&&$(".tr_"+e.ids).remove(),setTimeout((function(){pageOverlay.hide(),notify(e.message,e.status)}),2e3)}),"json"))})),$(document).on("click",".ajaxChangeStatusItem",(function(){event.preventDefault(),_that=$(this),_action=_that.attr("href"),_status=_that.data("status"),_redirect=_that.data("redirect"),_data=$.param({token:token,status:_status}),$.post(_action,_data,(function(e){pageOverlay.show(),setTimeout((function(){pageOverlay.hide(),notify(e.message,e.status)}),2e3),"success"==e.status&&"undefined"!=typeof _redirect&&reloadPage(_redirect)}),"json")})),$(document).on("click",".ajaxGetContents",(function(){return pageOverlay.show(),_that=$(this),$(".settings .sidebar li").removeClass("active"),_that.parent().addClass("active"),_type=_that.data("content"),_action=_that.attr("href"),_data=$.param({token:token,type:_type}),$.post(_action,_data,(function(e){$("#result_get_contents").html(e),history.pushState(null,"",_action.replace("/ajax_get_contents/","?t=")),setTimeout((function(){pageOverlay.hide()}),300)})),!1}))},this.uploadSettings=function(){var e=PATH+"file_manager/upload_files";$(document).on("click",".settings_fileupload",(function(){_that=$(this),_closest_div=_that.closest("div"),$(".settings .settings_fileupload").fileupload({url:e,formData:{token:token},dataType:"json",done:function(e,a){"success"==a.result.status&&(_img_link=a.result.link,_closest_div.children("input").val(_img_link))}})}))},$(document).on("change","input[type=radio][name=email_protocol_type]",(function(){_that=$(this),_type=_that.val(),"smtp"==_type?$(".smtp-configure").removeClass("d-none"):$(".smtp-configure").addClass("d-none")}))}General=new General,$((function(){General.init()}));